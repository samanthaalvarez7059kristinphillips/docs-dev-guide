---
title: Running Tasks
owner: CAPI
---

<strong><%= modified_date %></strong>

This topic describes how to run tasks in Cloud Foundry. 

Tasks are processes that are executed one time in the context of a given application. A task is only run at most once.

## <a id='about-tasks'></a> About Tasks

In contrast to a long running process (LRP), tasks run for a finite amout of time, then stop. Tasks run in their own containers and are designed to use minimal resources. After the task runs, Cloud Foundry destroys the container running the task.

As a single-use object, a task can be checked for its state and for a success or failure message.

### <a id="use-cases"></a> Use Cases for Tasks

Tasks are used to perform one-off jobs. For example, you can use a task to:

* Migrate a database
* Send an email
* Run a batch job
* Run a data processing script
* Process images
* Optimize a search index
* Upload data
* Backup data
* Download content

###<a id="task-proceses"></a> How Tasks Are Run

* A task includes the command to start the process, disk size, and memory allocation
* A task inherits environment variables, service bindings and security groups bound to the application
* Tasks respect app, space, and organization level memory quotas
* Tasks have a memory limit and a disk limit (global cloud foundry defaults for app memory in your bosh manifest or in ERT Application Developer Controls) 

The life-cycle of a task is:

1. A user initiates a task using the `cf run-task APPNAME TASK` command.
1. Cloud Foundry creates container specifically for the task.
1. Cloud Foundry runs the task on the container using the value provided to the `cf run-task` command
1. Cloud Foundry destroys container


<p class="note"><strong>Note</strong>: You cannot SSH into a running task.</p>

### Task Logging and Execution History

* Task execution history is retained for one month. 
* A syslog drain attached to an app will receive task log output
* Stdout/stderr from the task will be available on the appâ€™s firehose logs



## <a id='run-task'></a> Managing Tasks

* Admins can use the CAPI API to view all the tasks that are running in and org or space. (link to API docs)
* Admins can set memory usage on a global level (link)

Tasks have the following states:

* RUNNING: the task is currently in progress.
* FAILED: the task did not complete. This state occurs when a task does not work correctly or a user cancels the task.
* SUCCEEDED: the task completed successfully.


You can use the cf CLI to run a task in the context of an application. 

* To re-execute a task, you must create it as a new task.
* A task is cancellable

* Tasks are always executed asynchronously

To support running and managing tasks, the cf CLI supports the following commands:

<table>
	<tr>
		<td>run-task</td>
		<td>Run a one-off task on an app</td>
	</tr>
	<tr>
		<td>tasks</td>
		<td>List tasks of an app</td>
	</tr>
	<tr>
		<td>terminate-task</td>
		<td>Terminate a running task of an app</td>
	</tr>
</table>

* <strong>Comment</strong> I think it would be nice to include more how tasks are run. Is there a queue? Is the task run in a separate container?
* provide "architectural" information about how tasks work. For example, are they run in a separate container.
* different container, same code

For example, if you run cf run-task spring-music "echo blah", CF submits the task for execution and displays:

<code>
Creating task for app spring-music in org sleslie_pivotal / space development as sleslie@pivotal.io...
OK

Task 0 has been submitted successfully for execution.
</code>

To view the tasks running on an application:

cf tasks spring-music

id   name       state       start time                      command
0    e4d3c654   SUCCEEDED   Tue, 15 Nov 2016 19:25:55 UTC   echo blah



Cloud Foundry



## Sample Application

The <strong>github_link_to_example</strong> application demonstrates ...